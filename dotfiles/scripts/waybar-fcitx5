#!/usr/bin/env bash
set -euo pipefail

if ! command -v fcitx5-remote >/dev/null 2>&1; then
  exit 0
fi

name="$(fcitx5-remote -n 2>/dev/null || true)"
if [[ -z "${name}" ]]; then
  exit 0
fi

case "${name}" in
  rime)
    text="ä¸­"
    ;;
  keyboard-us|keyboard)
    text="EN"
    ;;
  *)
    text="${name}"
    ;;
esac

printf '{"text":"%s","tooltip":"%s"}\n' "${text}" "${name}"
