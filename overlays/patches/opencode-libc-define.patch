--- a/nix/bundle.ts
+++ b/nix/bundle.ts
@@ -9,6 +9,8 @@
 const worker = "./src/cli/cmd/tui/worker.ts"
 const version = process.env.OPENCODE_VERSION ?? "local"
 const channel = process.env.OPENCODE_CHANNEL ?? "local"
+const libc = process.platform === "linux" ? process.env.OPENCODE_LIBC ?? "glibc" : undefined
+const libcDefine = libc ? `'${libc}'` : "undefined"
 
 fs.rmSync(path.join(dir, "dist"), { recursive: true, force: true })
 
@@ -23,6 +25,7 @@
   define: {
     OPENCODE_VERSION: `'${version}'`,
     OPENCODE_CHANNEL: `'${channel}'`,
+    OPENCODE_LIBC: libcDefine,
     // Leave undefined so runtime picks bundled/dist worker or fallback in code.
     OPENCODE_WORKER_PATH: "undefined",
     OTUI_TREE_SITTER_WORKER_PATH: 'new URL("./cli/cmd/tui/parser.worker.js", import.meta.url).href',
